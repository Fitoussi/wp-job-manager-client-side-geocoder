var JMCGS={is_admin:1==jmcsgParams.is_admin?!0:!1,address_input_field:!1,new_address:"",form_submit_button:!1,geocoder_button_element:"",submission_status:!1,region:jmcsgParams.region,geocode_ok_message:'<em style="color:green">Location geocoded.</em>',geocode_missing_message:'<em style="color:red">Location is not geocoded.</em>',geocoding_failed_message:"Geocoding failed for the following reason:",init:function(){JMCGS.is_admin?(JMCGS.address_input_field=jQuery("#_job_location").length?jQuery("#_job_location"):jQuery("#_candidate_location"),JMCGS.generate_admin_fields()):(JMCGS.form_submit_button=jQuery('form#submit-job-form input[name="submit_job"]').length?jQuery("form#submit-job-form").find('input[name="submit_job"]'):jQuery("form#submit-resume-form").find('input[name="submit_resume"]'),JMCGS.address_input_field=jQuery("form#submit-job-form #job_location").length?jQuery("form#submit-job-form").find("#job_location"):jQuery("form#submit-resume-form").find("#candidate_location"),jQuery(JMCGS.form_submit_button).on("click",function(e){JMCGS.submission_status||(e.preventDefault(),jQuery(".jmcsg-address-field").val(""),JMCGS.submission_status=!0,JMCGS.geocode())}))},generate_admin_fields:function(){JMCGS.geocoder_button_element+='<div id="jmcsg-geocoder-action-wrapper">',JMCGS.geocoder_button_element+='<input type="button" id="jmcsg-geocode" class="button button-small" style="width:110px;" value="Geocode Address" />',JMCGS.geocoder_button_element+='<span id="jmcsg-geocode-message" style="width:200px;margin-left:10px;"></span>',JMCGS.geocoder_button_element+="</div>",jQuery(JMCGS.geocoder_button_element).insertAfter(JMCGS.address_input_field),"true"==jQuery("#jmcsg-geocoded").val()?(jQuery("#jmcsg-geocode-message").html(JMCGS.geocode_ok_message),jQuery("#jmcsg-geocode").attr("disabled","disabled")):jQuery("#jmcsg-geocode-message").html(JMCGS.geocode_missing_message),jQuery(JMCGS.address_input_field).on("input",function(){jQuery("#jmcsg-geocode-message").html(JMCGS.geocode_missing_message),jQuery(".jmcsg_address_fields").val(""),jQuery("#jmcsg-geocode").removeAttr("disabled")}),jQuery("#jmcsg-geocode").on("click",function(e){e.preventDefault(),JMCGS.geocode()})},geocode:function(){if(JMCGS.new_address=jQuery.trim(JMCGS.address_input_field.val()),JMCGS.is_admin){if(!JMCGS.new_address.length||"true"==jQuery("#jmcsg-geocoded").val())return}else JMCGS.new_address.length||JMCGS.form_submit_button.click();geocoder=new google.maps.Geocoder,geocoder.geocode({address:JMCGS.new_address,region:JMCGS.region},function(e,o){o==google.maps.GeocoderStatus.OK?(JMCGS.get_address_fields(e),JMCGS.is_admin&&(jQuery("#jmcsg-geocode").attr("disabled","disabled"),jQuery("#jmcsg-geocode-message").html(JMCGS.geocode_ok_message),jQuery("#jmcsg-geocoded").val("true"),jQuery("#jmcsg_location_update").val("1"))):JMSGS.is_admin?(alert(JMCGS.geocoding_failed_message+" "+o),jQuery("#jmcsg-geocode").removeAttr("disabled"),jQuery("#jmcsg-geocode-message").html(JMCGS.geocode_missing_message),jQuery("#jmcsg-geocoded").val("false"),jQuery("#jmcsg_location_update").val("1"),jQuery(".jmcsg_address_fields").val("")):JMCGS.form_submit_button.click()})},get_address_fields:function(e){var o=e[0].address_components;jQuery("#jmcsg_lat").val(e[0].geometry.location.lat()),jQuery("#jmcsg_long").val(e[0].geometry.location.lng()),jQuery("#jmcsg_formatted_address").val(e[0].formatted_address);for(x in o)"street_number"==o[x].types&&(street_number=o[x].long_name,jQuery("#jmcsg_street_number").val(street_number)),"route"==o[x].types&&(street=o[x].long_name,jQuery("#jmcsg_street").val(street)),"administrative_area_level_1,political"==o[x].types&&(jQuery("#jmcsg_state_short").val(o[x].short_name),jQuery("#jmcsg_state_long").val(o[x].long_name)),"locality,political"==o[x].types&&jQuery("#jmcsg_city").val(o[x].long_name),"postal_code"==o[x].types&&jQuery("#jmcsg_postcode").val(o[x].long_name),"country,political"==o[x].types&&(jQuery("#jmcsg_country_short").val(o[x].short_name),jQuery("#jmcsg_country_long").val(o[x].long_name));JMCGS.is_admin||setTimeout(function(){JMCGS.form_submit_button.click()},500)}};jQuery(document).ready(function(e){JMCGS.init()});